# paradigm_documentation

# 文档范式

这里「文档」是广义的，它包括我们在工作的时候写的一切除了代码之外的东西：注释、（真正的）文档、报告和论文。

## 注释

### 没有注释好过有注释

通过合理地运用命名，合理地将任务拆分为一个个类型和函数，我们本来可以避免使用注释。每当需要写注释的时候，考虑一下能否通过代码表达。

### 如果需要注释，注释意图而不是内容

当我们实在需要注释的时候，将代码的内容用文字再表述一遍并不能增加代码的可读性。这里有几种可能的情况：

一是我们将一些复杂运算的其中一些步骤用纸笔进行计算，然后把中间结果写进了代码。例如以下程序构造了一个循环矩阵的本征矢量构成的矩阵：

```
# T 是广义本征值问题 M x = λ K x 的本征矢量构成的矩阵T = zeros(n,n)T[:,1] .= sqrt(1 / n)for i in 1:(n-1)÷2    c1, c2 = i+1, n+1-i    T[:,c1] .= sqrt(2 / n) .* [cos(2π * i * (j-1) / n) for j in 1:n]    T[:,c2] .= sqrt(2 / n) .* [sin(2π * i * (j-1) / n) for j in 1:n]endif n % 2 == 0    T[:,n÷2+1] .= sqrt(1 / n) .* [(-1)^(i-1) for i in 1:n]end
```

通过添加注释我们能说明这些复杂运算的意义。更好的做法则是使用文档，在文档中给出详细的数学推导说明这样做的合理性，参见下一节。

二是我们在写代码的时候做出了一些考虑和决定，我们需要对这些决定进行说明以使（以后的）自己和他人明白。

## 文档

文档分为描述文档和 API 文档。

### 先有（描述）文档，再有代码

首先在文档中推导公式，检验公式正确无误后，再把公式翻译成代码，并且与公式逐行校对，在代码中应该加入一个链接指向文档中的公式。

### 通过代码中的类型说明和函数说明生成（API）文档（`Documenter.jl`）

如果代码需要发布给别人看，可以通过对每个类型和函数写 docstring 的方式添加文档，这种写法有比较规范的标准，就不赘述了。具体使用方法可以参考 https://juliadocs.github.io/Documenter.jl/stable/。

## 报告和论文

计算结果得到的数据和图片等等可以直接加入描述文档中。如果描述文档写得好，可以通过 Pandoc 转换为 PDF 直接作为组会报告的材料，再加工加工可以直接变成论文，全程跟代码一起用 Git 做版本管理，可以说是一气呵成了。